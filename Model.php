<?php	class Model{		private $serverName;		private $userName;		private $password;		private $myConnection;		private $dbName;		private $dataBase_Array=array(); 		private $size_dataBase_Array; 		private $params; 		private $type;		function __construct($newServerName, $newUserName, $newPassword, $newDbName){			$this->serverName = $newServerName;			$this->userName = $newUserName;			$this->password = $newPassword;			$this->dbName = $newDbName;		}				function connectDB(){			$this->myConnection = new mysqli(				$this->serverName, 				$this->userName, 				$this->password,				$this->dbName				);			// Check connection			if ($this->myConnection->connect_error) {				return $this->myConnection->connect_error	;			}			return "Connected successfully";		}		function DeleteData($Data){			$conn=$this->connectDB();			if($conn == "Connected successfully"){				$sql="Delete from student2 where ";			    $sayic=0;			    foreach ($Data as $key => $value) {			        $sql=$sql." id = ? ";			        $sayic+=1;			        if($sayic<count($Data)){			        	$sql=$sql." or ";			        }			    }                				$stmt=$this->myConnection->prepare($sql);				$type1="";				for($i=0;$i<count($Data);$i++){					$type1=$type1."i";				}				$stmt->bind_param($type1,...$Data);				$stmt->execute();				if($stmt->affected_rows>0){					$stmt->close();					return "Success";				}else{					$stmt->close();					return 0;				}			}else{				return $conn;			}		}		function InsertData($name,$last_name,$year){			#INSERT INTO student2 (name,last_name,year) SELECT name,last_name,year from student			$conn=$this->connectDB();			if($conn == "Connected successfully"){				$sql="INSERT INTO student2 (name,last_name,year) VALUES(?,?,?)";				$stmt=$this->myConnection->prepare($sql);				$stmt->bind_param("ssi",$name,$last_name,$year);				$stmt->execute();				if($stmt->affected_rows>0){					$stmt->close();					return "Success";				}else{					$stmt->close();					return 0;				}			}else{				return $conn;			}		}		function generateSQL($name,$last_name,$id,$year,$name1,$last_name1,$id1,$year1){			$this->params=array();				$this->types="";				$sql = "Update student2 SET ";				if (($name=="") && ($last_name=="") && ($id=="") && ($year=="") ) {					$sql = "select  * from student2 ";				}				else{					 					 					$tail="";										if($name != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $name);						$this->types = $this->types."s";												$tail = $tail." name = ?"; 					}					if($last_name != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $last_name);						$this->types = $this->types."s";						$tail = $tail." last_name =?"; 					}									if($id != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $id);						$this->types = $this->types."i";						$tail = $tail." id =?"; 					}										if($year != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $year);						$this->types = $this->types."i";						$tail = $tail." year =?"; 					}									$sql = $sql.$tail;					$sql=$sql." where ";					//echo "Sql kardesh:=> ".$sql;					$tail="";										if($name != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, '%'.$name1.'%');						$this->types = $this->types."s";												$tail = $tail." name LIKE ?"; 					}					if($last_name != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $last_name1);						$this->types = $this->types."s";						$tail = $tail." last_name = ?"; 					}									if($id != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $id1);						$this->types = $this->types."i";						$tail = $tail." id = ?"; 					}										if($year != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $year1);						$this->types = $this->types."i";						$tail = $tail." year = ?"; 					}									$sql = $sql.$tail;				} 						return $sql;		}		function UpdateSecondMethod($name,$last_name,$id,$year,$name1,$last_name1,$id1,$year1){			$conn = $this->connectDB();			if ($conn == "Connected successfully"){				$sql = $this->generateSQL($name,$last_name,$id,$year,$name1,$last_name1,$id1,$year1);				//echo $sql."<br>";				//echo $this->types."<br>";								//var_dump ($this->params);								$stmt = $this->myConnection->prepare($sql);								$stmt->bind_param($this->types, ...$this->params);				$stmt->execute();						 				}			else{				return $conn;			}		}		function UpdateData($name,$last_name,$id,$year,$name1,$last_name1,$id1,$year1){			$conn=$this->connectDB();			if ($conn == "Connected successfully"){				 echo "Calismasi gerek";				$this->params=array();				$this->types="";				$sql = "Update student2 SET ";				if (($name=="") && ($last_name=="") && ($id=="") && ($year=="") ) {					$sql = "select  * from student2 ";				}				else{					 					 					$tail="";										if($name != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $name);						$this->types = $this->types."s";												$tail = $tail." name = '".$name."'"; 					}					if($last_name != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $last_name);						$this->types = $this->types."s";						$tail = $tail." last_name ='".$last_name."'"; 					}									if($id != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $id);						$this->types = $this->types."i";						$tail = $tail." id ='".$id."'"; 					}										if($year != "") {						if ($tail != "") $tail = $tail." , ";												array_push($this->params, $year);						$this->types = $this->types."i";						$tail = $tail." year ='".$year."'"; 					}									$sql = $sql.$tail;					$sql=$sql." where ";					//echo "Sql kardesh:=> ".$sql;					$tail="";										if($name != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, '%'.$name1.'%');						$this->types = $this->types."s";												$tail = $tail." name = '".$name1."'"; 					}					if($last_name != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $last_name1);						$this->types = $this->types."s";						$tail = $tail." last_name = '".$last_name1."'"; 					}									if($id != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $id1);						$this->types = $this->types."i";						$tail = $tail." id = '".$id1."'"; 					}										if($year != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $year1);						$this->types = $this->types."i";						$tail = $tail." year = ".$year1."'"; 					}									$sql = $sql.$tail;				}									  				   echo "<br>Our Data is:".$sql;				   $this->myConnection->query($sql);				   if($this->myConnection->query($sql) === true){ 					    return "successfully";				    } else{ 					    return "ERROR:". $this->myConnection->error; 					} 					$this->myConnection->close(); 				  // echo "<br>";				  // foreach ($this->params as $key => $value) {				  // 	echo "Key is:".$key."  values is:".$value." <br>";				  // }				  // $stmt= $pdo->prepare($sql);				  // $stmt->execute($this->params);				  // $stmt=$this->myConnection->prepare($sql)->execute([$this->params]);				  // return $this->params;				// print("<br>Last Sql is:".$sql);				// $stmt=$this->myConnection->prepare($sql);				// $stmt->bind_param($this->types, ...$this->params); // 's' specifies the variable type => 'string'				// $stmt->execute();				 				 			}			else{				echo "No connection! ".$conn;				return 0;			}		}				function SearchSome_Data($arrayData,$name,$last_name,$id,$year){			$conn=$this->connectDB();			if ($conn == "Connected successfully"){				 				$this->params=array();				$this->types="";				echo "name::::".$name."<br>";				echo "lastname::::".$last_name."<br>";				echo "id::::".$id."<br>";				echo "year::::".$year."<br>";				$sql = "select ".implode(',',$arrayData)." from student2 ";				if (($name=="") && ($last_name=="") && ($id=="") && ($year=="") ) {					$sql = "select ".implode(',',$arrayData)." from student2 ";				}				else{					$sql=$sql." where ";					//echo "Sql kardesh:=> ".$sql;					$tail="";										if($name != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, '%'.$name.'%');						$this->types = $this->types."s";												$tail = $tail." name LIKE ?"; 					}					if($last_name != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $last_name);						$this->types = $this->types."s";						$tail = $tail." last_name = ?"; 					}									if($id != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $id);						$this->types = $this->types."i";						$tail = $tail." id = ?"; 					}										if($year != "") {						if ($tail != "") $tail = $tail." AND ";												array_push($this->params, $year);						$this->types = $this->types."i";						$tail = $tail." year = ?"; 					}									$sql = $sql.$tail;				}													print("<br>Last Sql is:".$sql);				$stmt=$this->myConnection->prepare($sql);				$stmt->bind_param($this->types, ...$this->params); // 's' specifies the variable type => 'string'				$stmt->execute();				$result = $stmt->get_result();				if ($result->num_rows > 0) {					  $newArray=array();					  $newArray[0]=array();			          $count=0;			          while($row = $result->fetch_assoc()) {		 				   $count1=0; 		   						   foreach ($arrayData as $key => $value) {   					   		   $newArray[$count][$key]=$row[$value];						   	   $count1+=1;						   }       				 	  							$count+=1;				           			 				          }								          $this->set_dataBase_Array($newArray);				          $this->set_size_dataBase_Array($count1);				          return $newArray;				   			        }			        else {			          $this->set_size_dataBase_Array(0);			          return $newArray;			        }			}			else{				echo "No connection! ".$conn;			}		}		function getAllProducts(){			$conn = $this->connectDB();			if ($conn == "Connected successfully"){				$sql = "SELECT * FROM `student2`";				$result = $this->myConnection->query($sql);				if ($result->num_rows > 0) {										  $newArray=array();					  $newArray[0]=array();			          $count=0;			          while($row = $result->fetch_assoc()) {		 					 		   							       				 	  				           $newArray[$count][0]=$row['id'];				           $newArray[$count][1]=$row['name'];				           $newArray[$count][2]=$row['last_name'];				           $newArray[$count][3]=$row['year'];				           $count++;			 				          }								          $this->set_dataBase_Array($newArray);				          $this->set_size_dataBase_Array($count);				   			        }			        else {			          $this->set_size_dataBase_Array(0);			        }							}			else{				echo "No connection! ".$conn;			}		}		 function set_size_dataBase_Array($size_dataBase_Array){		    $this->size_dataBase_Array=$size_dataBase_Array;		  }		  function get_size_dataBase_Array(){		    return $this->size_dataBase_Array;		  }		  function set_dataBase_Array($array){		     $this->dataBase_Array=$array;		  }		  function get_dataBase_Array(){		    return $this->dataBase_Array;		  }	}?>